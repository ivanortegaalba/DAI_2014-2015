'''
Created on 2/12/2014

@author: ivanortegaalba
'''

# etree sax parser
from lxml import etree

class ParseRssNews ():
	noticias = 0;
	imagenes = 0;
	def __init__ (self):
		print('Principio del archivo------------------------')
				
	def start (self, tag, attrib):  # Etiquetas de inicio
		print (' < %s > ' % tag)
		if(tag == 'image'):
			self.imagenes = self.imagenes + 1;
# 		for k in attrib:
# 			print (' %s=" %s"' % (k, attrib[k]))
	def end (self, tag):  # Etiquetas de fin
		print (' </ %s > ' % tag)
		if (tag == 'item'):
			self.noticias = self.noticias + 1;
			print('HEMOS ENCONTRADO: ' + str(self.noticias) + 'NOTICIAS')
			print ('HEMOS ENCONTRADO' + str(self.imagenes) + 'IMAGENES') 

	def data (self, data):  # texto
		print (' - %s - ' % data)

	def close (self):
		print (' - - - -Fin del archivo')

parser = etree.XMLParser (target=ParseRssNews ())
etree.parse ('portada.xml', parser)
#'portada.xml' es un rss en
# http://ep00.epimg.net/rss/elpais/portada.xml